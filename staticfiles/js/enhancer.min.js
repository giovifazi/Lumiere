var BooksearchApi=function(){var t={};return t.queryBooks=function(t){$.ajax({url:"https://www.googleapis.com/books/v1/volumes?q="+t,dataType:"json",success:function(t){for(herebooks.innerHTML+="<tr> <th>Title</th> <th>Date</th> <th>Link</th> </tr>",i=0;i<t.items.length;i++)herebooks.innerHTML+="<tr> <th>"+t.items[i].volumeInfo.title+"</th> <th>"+t.items[i].volumeInfo.publishedDate+'</th> <th><a href="'+t.items[i].volumeInfo.previewLink+'">Click here</a></th></tr>'},type:"GET",error:function(t,e,n){herebooks.innerHTML+="<p>Could not find any books</p>"}})},t}(),WikiquoteApi=function(){var t={},e="https://en.wikiquote.org/w/api.php";return t.cleanupStrings=function(t){for(var e=[],n=0;n<t.length;n++)t[n].trim().length>0&&e.push(t[n].trim());return e},t.randq=function(e){WikiquoteApi.getRandomQuote(e,function(e){q=t.cleanupStrings(e.quote.split(".")),document.getElementById("herequote").innerHTML=q,document.getElementById("tweetquote").href="https://twitter.com/intent/tweet?text="+q},function(){var t=document.getElementById("noquote");t.innerHTML="";})},t.queryTitles=function(t,n,o){$.ajax({url:e,dataType:"jsonp",data:{format:"json",action:"query",redirects:"",titles:t},success:function(t,e){var r=t.query.pages,i=-1;for(var s in r){var a=r[s];if(!("missing"in a)){i=a.pageid;break}}i>0?n(i):o("No results")},error:function(t,e,n){o("Error processing your query")}})},t.getSectionsForPage=function(t,n,o){$.ajax({url:e,dataType:"jsonp",data:{format:"json",action:"parse",prop:"sections",pageid:t},success:function(t,e){var o=[],r=t.parse.sections;for(var i in r){var s=r[i].number.split(".");s.length>1&&"1"===s[0]&&o.push(r[i].index)}0===o.length&&o.push("1"),n({titles:t.parse.title,sections:o})},error:function(t,e,n){o("Error getting sections")}})},t.getQuotesForSection=function(t,n,o,r){$.ajax({url:e,dataType:"jsonp",data:{format:"json",action:"parse",noimages:"",pageid:t,section:n},success:function(t,e){var n=t.parse.text["*"],r=[];$(n).find("li:not(li li)").each(function(){$(this).children().remove(":not(b)");var t=$(this).find("b");t.length>0?r.push(t.html()):r.push($(this).html())}),o({titles:t.parse.title,quotes:r})},error:function(t,e,n){r("Error getting quotes")}})},t.getWikiForSection=function(t,n,o,r,i){$.ajax({url:e,dataType:"jsonp",data:{format:"json",action:"parse",noimages:"",pageid:n,section:o},success:function(e,n){var o;console.log("what is iwlink:"+e.parse.iwlinks);for(var i=e.parse.iwlinks,s=0;s<i.length;s++){var a=i[s];-1!=a["*"].indexOf(t)&&(o=a.url)}r(o)},error:function(t,e,n){i("Error getting quotes")}})},t.openSearch=function(t,n,o){$.ajax({url:e,dataType:"jsonp",data:{format:"json",action:"opensearch",namespace:0,suggest:"",search:t},success:function(t,e){n(t[1])},error:function(e,n,r){o("Error with opensearch for "+t)}})},t.getRandomQuote=function(e,n,o){var r=function(t){o(t)},i=function(t){var e=Math.floor(Math.random()*t.quotes.length);n({titles:t.titles,quote:t.quotes[e]})},s=function(e,n){var o=Math.floor(Math.random()*n.sections.length);t.getQuotesForSection(e,n.sections[o],i,r)};t.queryTitles(e,function(e){t.getSectionsForPage(e,function(t){s(e,t)},r)},r)},t.capitalizeString=function(t){var e=t.split(" "),n=[];for(s in e)n.push(e[s].charAt(0).toUpperCase()+e[s].slice(1));return n.join(" ")},t}();
